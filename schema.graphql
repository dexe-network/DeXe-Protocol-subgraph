type BasicPool @entity {
  id: ID! # pool address

  baseToken: Bytes!

  positions: [PositionInBasicPool!]! @derivedFrom(field: "basicPool")
}

type PositionOffsetInBasicPool @entity {
  id: ID! # trader pool address + position token address
  offset: BigInt!
}

type PositionInBasicPool @entity {
  id: ID! # trader pool address + position token address + position offset
  positionToken: Bytes!

  totalVolumeFrom: BigInt!
  totalVolumeTo: BigInt!
  averagePositionPriceInBase: BigInt!

  basicPool: BasicPool!
  trades: [TradeInBasicPool!]! @derivedFrom(field: "position")
}

type TradeInBasicPool @entity {
  id: ID! # tx hash
  fromToken: Bytes!
  toToken: Bytes!

  volume: BigInt!
  priceInBase: BigInt!
  timestamp: BigInt!

  position: PositionInBasicPool!
}
